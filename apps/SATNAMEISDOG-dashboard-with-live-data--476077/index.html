<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline'; connect-src https://8mag3jdi5f.execute-api.us-east-1.amazonaws.com; img-src 'self' data:; font-src 'self'; object-src 'none'; base-uri 'none'; form-action 'none';">
<script>
/* SingularityDB â€” DO NOT MODIFY THIS BLOCK */
const SINGULARITY_DB_API = "https://8mag3jdi5f.execute-api.us-east-1.amazonaws.com/api/data";
const SINGULARITY_DB_NS = "SATNAMEISDOG-dashboard-with-live-data--476077";
class SingularityDB {
  constructor(ns) { this.ns = ns; this.api = SINGULARITY_DB_API; }
  async get(key) {
    try {
      const r = await fetch(this.api + "/" + this.ns + "/" + encodeURIComponent(key));
      if (!r.ok) return null;
      return await r.json();
    } catch(e) { console.error("SingularityDB get error:", e); return null; }
  }
  async set(key, value) {
    try {
      const r = await fetch(this.api + "/" + this.ns + "/" + encodeURIComponent(key), {
        method: "PUT",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({value: value})
      });
      return await r.json();
    } catch(e) { console.error("SingularityDB set error:", e); return {ok: false}; }
  }
  async delete(key) {
    try {
      const r = await fetch(this.api + "/" + this.ns + "/" + encodeURIComponent(key), {
        method: "DELETE"
      });
      return await r.json();
    } catch(e) { console.error("SingularityDB delete error:", e); return {ok: false}; }
  }
  async list() {
    try {
      const r = await fetch(this.api + "/" + this.ns);
      if (!r.ok) return [];
      return await r.json();
    } catch(e) { console.error("SingularityDB list error:", e); return []; }
  }
}
const db = new SingularityDB(SINGULARITY_DB_NS);
/* END SingularityDB */
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockchain Live Dashboard</title>
    <style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-card: #242424;
            --accent: #00d4ff;
            --accent-glow: rgba(0, 212, 255, 0.3);
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --text-muted: #666;
            --border: #333;
            --success: #00ff88;
            --warning: #ffaa00;
            --error: #ff4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: system-ui, -apple-system, sans-serif;
            overflow-x: hidden;
        }

        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: var(--bg-primary);
            display: grid;
            place-items: center;
            z-index: 10000;
            transition: opacity 0.3s ease;
        }

        .loader.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top: 3px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
            padding: clamp(1rem, 3vw, 2rem);
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), #ffffff);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: var(--text-secondary);
            font-size: clamp(0.9rem, 2vw, 1.1rem);
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.1);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent), transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .metric {
            margin-bottom: 1rem;
        }

        .metric-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .metric-change {
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }

        .metric-change.positive {
            color: var(--success);
        }

        .metric-change.negative {
            color: var(--error);
        }

        .chart-container {
            height: 120px;
            background: var(--bg-secondary);
            border-radius: 8px;
            margin-top: 1rem;
            padding: 1rem;
            display: grid;
            place-items: center;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .transactions-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .transaction {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: between;
            align-items: center;
            transition: background 0.2s ease;
        }

        .transaction:hover {
            background: var(--bg-secondary);
        }

        .tx-hash {
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            color: var(--text-secondary);
            flex: 1;
        }

        .tx-amount {
            font-weight: 600;
            color: var(--accent);
        }

        .refresh-btn {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--accent);
            border: none;
            color: var(--bg-primary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px var(--accent-glow);
            z-index: 1000;
        }

        .refresh-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px var(--accent-glow);
        }

        .refresh-btn:active {
            transform: scale(0.95);
        }

        .refresh-btn.spinning {
            animation: spin 1s linear infinite;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            .card {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="loader" id="loader">
        <div class="spinner"></div>
    </div>

    <div class="dashboard" id="dashboard">
        <div class="header">
            <h1>Blockchain Dashboard</h1>
            <p>Real-time network statistics and transaction monitoring</p>
        </div>

        <div class="grid">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">Network Status</div>
                    <div class="status-indicator"></div>
                </div>
                <div class="metric">
                    <div class="metric-label">Current Block</div>
                    <div class="metric-value" id="currentBlock">0</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Network Hash Rate</div>
                    <div class="metric-value" id="hashRate">0 TH/s</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Difficulty</div>
                    <div class="metric-value" id="difficulty">0</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Market Data</div>
                    <div class="status-indicator"></div>
                </div>
                <div class="metric">
                    <div class="metric-label">Price (USD)</div>
                    <div class="metric-value" id="price">$0.00</div>
                    <span class="metric-change" id="priceChange">+0.00%</span>
                </div>
                <div class="metric">
                    <div class="metric-label">Market Cap</div>
                    <div class="metric-value" id="marketCap">$0</div>
                </div>
                <div class="metric">
                    <div class="metric-label">24h Volume</div>
                    <div class="metric-value" id="volume">$0</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Transaction Pool</div>
                    <div class="status-indicator"></div>
                </div>
                <div class="metric">
                    <div class="metric-label">Pending Transactions</div>
                    <div class="metric-value" id="pendingTx">0</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Average Fee</div>
                    <div class="metric-value" id="avgFee">0 sat/vB</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Transactions/Second</div>
                    <div class="metric-value" id="tps">0</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Node Information</div>
                    <div class="status-indicator"></div>
                </div>
                <div class="metric">
                    <div class="metric-label">Connected Peers</div>
                    <div class="metric-value" id="peers">0</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Sync Progress</div>
                    <div class="metric-value" id="syncProgress">100%</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Uptime</div>
                    <div class="metric-value" id="uptime">0d 0h 0m</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-title">Recent Transactions</div>
                <div class="status-indicator"></div>
            </div>
            <div class="transactions-list" id="transactionsList">
                <div class="chart-container">
                    Loading recent transactions...
                </div>
            </div>
        </div>
    </div>

    <button class="refresh-btn" id="refreshBtn" title="Refresh Data">âŸ³</button>

    <a href="https://singularityengine.ai" style="position:fixed;bottom:8px;right:12px;font-size:11px;color:#333;text-decoration:none;font-family:system-ui;z-index:9999;opacity:0.5" onmouseover="this.style.opacity='1';this.style.color='#00d4ff'" onmouseout="this.style.opacity='0.5';this.style.color='#333'">Built by Singularity Engine ðŸ¤–</a>

    <script>
        class BlockchainDashboard {
            constructor() {
                this.isRefreshing = false;
                this.refreshInterval = null;
                this.mockData = null;
            }

            async init() {
                try {
                    // Load saved data or initialize with defaults
                    this.mockData = await db.get('dashboard_data') || this.getInitialData();
                    
                    this.updateUI();
                    this.startAutoRefresh();
                    this.setupEventListeners();
                    
                    // Hide loader
                    setTimeout(() => {
                        document.getElementById('loader').classList.add('hidden');
                    }, 1000);
                } catch (error) {
                    console.error('Init error:', error);
                    document.getElementById('loader').classList.add('hidden');
                }
            }

            getInitialData() {
                return {
                    currentBlock: 845123,
                    hashRate: 523.4,
                    difficulty: 67891234567890,
                    price: 43250.00,
                    priceChange: 2.34,
                    marketCap: 850000000000,
                    volume: 28500000000,
                    pendingTx: 15423,
                    avgFee: 12,
                    tps: 7,
                    peers: 8,
                    syncProgress: 100,
                    uptime: { days: 15, hours: 7, minutes: 23 },
                    transactions: [
                        { hash: '1a2b3c4d5e6f7890abcdef1234567890abcdef12', amount: 0.5847, time: new Date().getTime() - 120000 },
                        { hash: '2b3c4d5e6f7890ab1234567890abcdef1234567890', amount: 2.1234, time: new Date().getTime() - 240000 },
                        { hash: '3c4d5e6f7890abcd567890abcdef1234567890abcd', amount: 0.0123, time: new Date().getTime() - 360000 },
                        { hash: '4d5e6f7890abcdef90abcdef1234567890abcdef12', amount: 15.7890, time: new Date().getTime() - 480000 },
                        { hash: '5e6f7890abcdef121234567890abcdef1234567890', amount: 0.8765, time: new Date().getTime() - 600000 }
                    ]
                };
            }

            updateUI() {
                // Network Status
                document.getElementById('currentBlock').textContent = this.mockData.currentBlock.toLocaleString();
                document.getElementById('hashRate').textContent = `${this.mockData.hashRate} TH/s`;
                document.getElementById('difficulty').textContent = this.formatLargeNumber(this.mockData.difficulty);

                // Market Data
                document.getElementById('price').textContent = `$${this.mockData.price.toLocaleString()}`;
                const priceChangeEl = document.getElementById('priceChange');
                priceChangeEl.textContent = `${this.mockData.priceChange > 0 ? '+' : ''}${this.mockData.priceChange}%`;
                priceChangeEl.className = `metric-change ${this.mockData.priceChange > 0 ? 'positive' : 'negative'}`;
                document.getElementById('marketCap').textContent = `$${this.formatLargeNumber(this.mockData.marketCap)}`;
                document.getElementById('volume').textContent = `$${this.formatLargeNumber(this.mockData.volume)}`;

                // Transaction Pool
                document.getElementById('pendingTx').textContent = this.mockData.pendingTx.toLocaleString();
                document.getElementById('avgFee').textContent = `${this.mockData.avgFee} sat/vB`;
                document.getElementById('tps').textContent = this.mockData.tps;

                // Node Information
                document.getElementById('peers').textContent = this.mockData.peers;
                document.getElementById('syncProgress').textContent = `${this.mockData.syncProgress}%`;
                document.getElementById('uptime').textContent = 
                    `${this.mockData.uptime.days}d ${this.mockData.uptime.hours}h ${this.mockData.uptime.minutes}m`;

                // Recent Transactions
                this.updateTransactionsList();
            }

            updateTransactionsList() {
                const container = document.getElementById('transactionsList');
                container.innerHTML = '';

                this.mockData.transactions.forEach(tx => {
                    const txEl = document.createElement('div');
                    txEl.className = 'transaction';
                    
                    const timeAgo = this.formatTimeAgo(tx.time);
                    
                    txEl.innerHTML = `
                        <div style="flex: 1;">
                            <div class="tx-hash">${tx.hash.substring(0, 20)}...</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 2px;">${timeAgo}</div>
                        </div>
                        <div class="tx-amount">${tx.amount} BTC</div>
                    `;
                    
                    container.appendChild(txEl);
                });
            }

            formatLargeNumber(num) {
                if (num >= 1e12) return (num / 1e12).toFixed(1) + 'T';
                if (num >= 1e9) return (num / 1e9).toFixed(1) + 'B';
                if (num >= 1e6) return (num / 1e6).toFixed(1) + 'M';
                if (num >= 1e3) return (num / 1e3).toFixed(1) + 'K';
                return num.toString();
            }

            formatTimeAgo(timestamp) {
                const seconds = Math.floor((Date.now() - timestamp) / 1000);
                if (seconds < 60) return `${seconds}s ago`;
                const minutes = Math.floor(seconds / 60);
                if (minutes < 60) return `${minutes}m ago`;
                const hours = Math.floor(minutes / 60);
                return `${hours}h ago`;
            }

            async simulateDataUpdate() {
                if (this.isRefreshing) return;
                
                this.isRefreshing = true;
                const refreshBtn = document.getElementById('refreshBtn');
                refreshBtn.classList.add('spinning');

                // Simulate API delay
                await new Promise(resolve => setTimeout(resolve, 1000));

                // Update mock data with realistic variations
                this.mockData.currentBlock += Math.floor(Math.random() * 3) + 1;
                this.mockData.hashRate += (Math.random() - 0.5) * 10;
                this.mockData.price += (Math.random() - 0.5) * 100;
                this.mockData.priceChange = ((Math.random() - 0.5) * 10).toFixed(2);
                this.mockData.pendingTx += Math.floor((Math.random() - 0.5) * 1000);
                this.mockData.avgFee += Math.floor((Math.random() - 0.5) * 5);
                this.mockData.tps = Math.floor(Math.random() * 15) + 1;
                this.mockData.peers += Math.floor((Math.random() - 0.5) * 2);
                
                // Update uptime
                this.mockData.uptime.minutes += 1;
                if (this.mockData.uptime.minutes >= 60) {
                    this.mockData.uptime.minutes = 0;
                    this.mockData.uptime.hours += 1;
                    if (this.mockData.uptime.hours >= 24) {
                        this.mockData.uptime.hours = 0;
                        this.mockData.uptime.days += 1;
                    }
                }

                // Add new transaction occasionally
                if (Math.random() < 0.7) {
                    const newTx = {
                        hash: this.generateRandomHash(),
                        amount: parseFloat((Math.random() * 10).toFixed(4)),
                        time: Date.now()
                    };
                    this.mockData.transactions.unshift(newTx);
                    if (this.mockData.transactions.length > 10) {
                        this.mockData.transactions.pop();
                    }
                }

                // Save updated data
                await db.set('dashboard_data', this.mockData);
                
                this.updateUI();
                
                refreshBtn.classList.remove('spinning');
                this.isRefreshing = false;
            }

            generateRandomHash() {
                const chars = '0123456789abcdef';
                let hash = '';
                for (let i = 0; i < 40; i++) {
                    hash += chars[Math.floor(Math.random() * chars.length)];
                }
                return hash;
            }

            setupEventListeners() {
                document.getElementById('refreshBtn').addEventListener('click', () => {
                    this.simulateDataUpdate();
                });
            }

            startAutoRefresh() {
                // Auto-refresh every 30 seconds
                this.refreshInterval = setInterval(() => {
                    this.simulateDataUpdate();
                }, 30000);
            }
        }

        // Initialize dashboard when page loads
        const dashboard = new BlockchainDashboard();
        dashboard.init();
    </script>
</body>
</html>